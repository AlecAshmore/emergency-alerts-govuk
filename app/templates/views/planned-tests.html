{% extends "content.html" %}

{%- from "govuk_frontend_jinja/components/breadcrumbs/macro.html" import govukBreadcrumbs -%}
{%- from "govuk_frontend_jinja_overrides/templates/components/language-select/macro.html" import hmrcLanguageSelect -%}
{%- from "components/related_content.html" import related_content -%}
{%- from "components/meta_tags.html" import metaTags -%}

{% set pageTitle = "Planned tests" %}

{% block metaTags %}
  {{ metaTags(
    description="Planned tests of the Emergency Alerts service",
    title=pageTitle,
    url="https://www.gov.uk/alerts/planned-tests"
  ) }}
{% endblock %}

{% block pageTitleCurrent -%}
  {{ pageTitle }}
{%- endblock %}

{% block beforeContent %}
  {{ govukBreadcrumbs({
    "items": [
      {
        "text": "Home",
        "href": "/"
      },
      {
        "text": "About Emergency Alerts",
        "href": "/alerts"
      }
    ]
  }) }}
{% endblock %}

{% block mainContent %}
  <div class="govuk-grid-row">
    <div class="govuk-grid-column-two-thirds">
      <h1 class="govuk-heading-xl">
        {{ pageTitle }}
      </h1>
    </div>
    <div class="govuk-grid-column-one-third">
      {{ hmrcLanguageSelect({
        'language': 'en',
        'cy': {
          'href': '/alerts/planned-tests.cy'
        }
      }) }}
    </div>
  </div>
  <div class="govuk-grid-row">
    <div class="govuk-grid-column-two-thirds">
      {% for alert_or_planned_test in alerts.current_and_planned_test_alerts|sort %}
      <h2 class="govuk-heading-m govuk-!-margin-top-6">
        {{ alert_or_planned_test.starts_at_date.date_as_lang }}
      </h2>
      {#
        Only planned tests have a description â€“ for real alerts we show
        fixed content (below).
      #}
      {% if alert_or_planned_test.description %}
        {% if alert_or_planned_test.display_areas %}
          <h3 class="govuk-body govuk-!-margin-bottom-6">
            <span class="govuk-visually-hidden">Planned test will be sent to </span>{{ alert_or_planned_test.display_areas | formatted_list(before_each='', after_each='') }}
          </h3>
        {% endif %}
        {{ alert_or_planned_test.description | paragraphize(classes="govuk-body") }}
      {% else %}
      <p class="govuk-body">
        Some mobile phone networks in the UK will test emergency alerts.
      </p>
      <p class="govuk-body">
        Most phones and tablets will not get a test alert.
      </p>
      <p class="govuk-body">
        The alert will say:
      </p>
      <div class="govuk-inset-text govuk-!-margin-top-2">
        <p class="govuk-body">
          This is a mobile network operator test of the Emergency Alerts service. You do not need to take any action. To find out more, search for gov.uk/alerts
        </p>
      </div>
      {% endif %}
      {% else %}
      <p class="govuk-body">
        There are currently no planned tests of emergency alerts.
      </p>
      {% endfor %}
    </div>
    <div class="govuk-grid-column-one-third">
      {{ related_content({
        "items": [
          {
            "text": "About Emergency Alerts",
            "href": "/alerts"
          },
          {
            "text": "How emergency alerts work",
            "href": "/alerts/how-alerts-work"
          },
          {
            "text": "Testing the Emergency Alerts system",
            "href": "/alerts/system-testing"
          },
          {
            "text": "Current alerts",
            "href": "/alerts/current-alerts"
          },
          {
            "text": "Past alerts",
            "href": "/alerts/past-alerts"
          }
        ]
      }) }}
    </div>
  </div>
{% endblock %}
